// @ts-nocheck
const http=require("http"),fs=require("fs"),path=require("path"),PORT=3e3,MIME_TYPES={".html":"text/html",".js":"text/javascript",".css":"text/css",".json":"application/json",".png":"image/png",".jpg":"image/jpg",".gif":"image/gif",".svg":"image/svg+xml",".ico":"image/x-icon"},server=http.createServer(((e,t)=>{console.log(`请求: ${e.url}`);let o="."+e.url;"./"===o&&(o="./index.html");const r=String(path.extname(o)).toLowerCase(),i=MIME_TYPES[r]||"application/octet-stream";fs.readFile(path.join(__dirname,o),((e,r)=>{e?"ENOENT"===e.code?(console.error(`文件不存在: ${o}`),t.writeHead(404),t.end("404 Not Found")):(console.error(`服务器错误: ${e.code}`),t.writeHead(500),t.end(`Server Error: ${e.code}`)):(t.writeHead(200,{"Content-Type":i}),t.end(r,"utf-8"))}))}));server.listen(3e3,(()=>{console.log("服务器运行在 http://localhost:3000/"),console.log("按 CTRL+C 终止服务器")}));